# CourseLearning第三阶段需求规格说明文档

> #### 5A446 余东骏 郝晨杰 伍成恩 程熹
> 最后更改于2021/07/11

## 文档修改历史

| 修改人员 |       日期       | 修改原因 | 版本号 |
| :------: | :--------------: | :------: | :----: |
|  余东骏  | 2021/07/08 23:40 | 最初汇总 |  v1.0  |
|   程熹   | 2021/07/09 10:30 | 文档修缮 |  V2.0  |
|  余东骏  | 2021/07/11 09:40 | 最终汇总 |  v3.0  |

## 目录

[toc]

## 1. 引言

> ###### 作者：余东骏
> 
> ###### 最后一次修改者：余东骏
> 
> ###### 最后一次修改时间：2021/05/17

### 1.1 目的

本文档描述了CourseLearning第三阶段的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。除特殊说明外，本文档所包含的需求都是高优先级需求。

### 1.2 范围

CourseLearning平台系统具有课程展示、教师创建发布管理课程、管理课件、学⽣浏览购买使⽤课程、参加课程测试、课程评论等功能。但本文档中只讨论与购买课程相关的部分。

### 1.3 参考文献

【1】.  IEEE相关标准;

【2】.  CourseLearning第三阶段需求用例文档;

【3】.  软件工程与计算（卷二）：软件开发的技术基础 / 骆斌主编. ——北京：机械工业出版社, 2012.12;

## 2. 总体描述

> ###### 作者：余东骏
>
> ###### 最后一次修改者：余东骏
>
> ###### 最后一次修改时间：2021/07/06

### 2.1 项目前景

#### 2.1.1 背景与机遇

疫情下线上教育的需求成井喷态势。CourseLearning 作为⼀个课程学习⽹站，期望为每⼀个渴求知识的⼈提供⼀个少⾛弯路的平台（可以参考中国⼤学MOOC⽹站），希望通过售卖课程、会员资格等⽅式盈利。

#### 2.1.2 业务需求

- BR1: 在系统上线后，能让已注册学生用户顺利购买相关课程并查看相关订单记录；

  度量：已注册学生用户应能在10次操作内完成课程订单的创建及支付流程或查询所有订单/已购课程的操作；

### 2.2 项目功能

> 购买了课程的学生用户/创建课程的教师用户可以在课程讨论区发表并查看帖子，还能就帖子或评论发表评论进行回复。用户发表的帖⼦或评论得到回复之后，还能得到通知。各用户群构成一个完整的闭环。

- SF1: 每个课程都有且只有一个讨论区，购买了课程的学生用户/创建课程的教师用户可以在对应课程的讨论区发表并查看帖子；
- SF2: 购买了课程的学生用户/创建课程的教师用户可以对对应课程的讨论区中的特定帖子进行评论，也可以针对评论进行评论回复；
- SF3: 用户发表的帖⼦或评论得到回复之后，还能得到通知；

### 2.3 用户特征

|                  角色                   |                         描述                         |
| :-------------------------------------: | :--------------------------------------------------: |
| 购买了课程的学生用户/创建课程的教师用户 | 他们希望针对自己购买或创建的课程在一个论坛中进行交流 |

### 2.4 约束

- CON1: 系统使用Web界面，且应能在跨平台（PC端的Windows、Linux和MacOS系统，移动端的的多种浏览器访问时能正常工作；
- CON2: 项目要使用持续集成方法进行开发；
- CON3: 在开发中，开发者要提交软件需求规格说明文档；

### 2.5 假设与依赖

- AE1: 一个课程能且只能对应于一个讨论区，一个讨论区内可以有多条帖子
- AE2: 学生只能用平台的余额进行订单的支付；

## 3 详细需求描述
### 3.1 对外接口需求
#### 3.1.1 用户界面 
系统应该使用扁平风格的界面，帮助学生用户完成业务需求。

##### UI 1： 发布帖子

> ###### 作者：余东骏
> 
> ###### 最后一次修改者：余东骏
> 
> ###### 最后一次修改时间：2021/07/11

###### 1. 进入课程讨论区页面并点击`发布帖子`，弹出帖子内容输入框。

![image-20210711082940610](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711082940610.png)

![image-20210711083336562](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711083336562.png)

###### 1a. 用户未登录，则系统提示`请先登录再发帖`并结束流程。

![image-20210711083137106](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711083137106.png)

###### 2. 用户输入内容并点击`提交`，正常情况下系统提示`贴子创建成功`。

![image-20210711083549954](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711083549954.png)

页面自动刷新，刚才发布的贴子已经出现在页面上。

![image-20210711083705186](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711083705186.png)

###### 2a. 文本超长（标题或文本，以标题超长为例），系统提示==项目==`长度不能超过255`

![image-20210711084013904](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711084013904.png)

###### 2b. 用户没有权限发帖子，系统提示`您无权在此发表帖子，因为您尚未购买该课程且不是创建该课程的老师`

![image-20210711084837047](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711084837047.png)

##### UI 2：评论帖子

> ###### 作者：余东骏
> ###### 最后一次修改者：余东骏
> ###### 最后一次修改时间：2021/07/11

###### 1、点击`回复`，对帖子本身或者贴子里的评论进行评论。

1. 下面两处的`回复`是对帖子本身的回复。

- 讨论区页面对应帖子的`回复`按钮

  ![image-20210711085248967](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711085248967.png)

- 帖子详情页面帖子内容旁的`回复`内容![image-20210711085430110](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711085430110.png)

而后，弹出输入框提示用户这是对帖子本身的回复。

![image-20210711090001672](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711090001672.png)

2. 具体评论旁边的`回复`是对评论的评论（回复）。

![image-20210711090158604](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711090158604.png)

![image-20210711090128859](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711090128859.png)

###### 1a. 用户未登录，则根据用户试图评论的是帖子本身还是评论，系统提示`请先登录再回复帖子`或`请先登录再回复评论`并结束流程。

![image-20210711090543559](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711090543559.png)

![image-20210711090417756](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711090417756.png)

###### 2. 用户输入内容并点击`提交`，正常情况下系统提示`评论发表成功`。

![image-20210711090841885](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711090841885.png)

###### 2a. 内容超长，系统提示==项目==`长度不能超过255`

情形与发帖时标题长度超过255相同，提示`帖子内容长度不能超过255！`。

###### 2b. 用户没有权限发评论，系统提示`您无权在此发表评论，因为您尚未购买该课程且不是创建该课程的老师`

![image-20210711092605702](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711092605702.png)

##### UI 3：查看讨论区

> ###### 作者：余东骏
> ###### 最后一次修改者：余东骏
> ###### 最后一次修改时间：2021/07/11

###### 1. 点击课程卡片中的`讨论区`，进入对应讨论区。

![image-20210711092240472](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711092240472.png)

![image-20210711092213890](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711092213890.png)

##### UI 4：查看帖子

> ###### 作者：余东骏
> ###### 最后一次修改者：余东骏
> ###### 最后一次修改时间：2021/07/11

###### 1. 在讨论区页面，点击`共`==数量==`条评论`进入对应帖子详情页面。

![image-20210711092648531](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711092648531.png)

![image-20210711092744148](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711092744148.png)

##### UI 5：查看回帖通知

> ###### 作者：余东骏
>
> ###### 最后一次修改者：余东骏
>
> ###### 最后一次修改时间：2021/07/11

###### 1. 已登录用户展开右上角菜单，选择`消息中心`进入通知列表页面。

![image-20210711093032778](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711093032778.png)

![image-20210711093056790](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711093056790.png)

###### 2. ==可选== 点击`设为已读`可以将消息置为已读，设置后其底色为白色。点击`查看`可以跳到对应帖子详情页面。

- 设置已读效果![image-20210711093221908](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711093221908.png)
- `查看`跳转结果![image-20210711093253617](https://ydjsir-cn.oss-cn-shenzhen.aliyuncs.com/GitPages/%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.assets/image-20210711093253617.png)

#### 3.1.2 通信接口

浏览器前端采用HTTP REST API方式与服务端进行交互。

### 3.2 功能需求
#### 3.2.1  发布帖子

> ###### 用例编号：01
>
> ###### 作者：程熹
>
> ###### 最后一次修改者：余东骏
>
> ###### 最后一次修改时间：2021/07/11

##### 3.2.1.1 特征描述

购买了课程的学生用户/创建课程的教师用户可以在对应的课程讨论区发布帖子。

##### 3.2.1.2 刺激/响应序列

|         刺激          |                             响应                             |
| :-------------------: | :----------------------------------------------------------: |
|    用户进入讨论区     |                      系统展示讨论区信息                      |
|   用户点击发布帖子    |                     系统展示发布帖子弹窗                     |
| 用户输入帖子标题/内容 | 系统检查输入内容（标题长度不超255，内容长度不超255，单位为字符）并对用户进行鉴权（必须是已购买该课程的学生或创建该课程的老师），不通过会提示错误信息并结束流程 |
|     用户确认发帖      |                系统提示发帖成功，显示帖子页面                |

##### 3.2.1.3 相关功能需求

|       功能        |         需求说明         |
| :---------------: | :----------------------: |
| `Post.createPost` | 根据用户输入内容创建帖子 |

#### 3.2.2 评论帖子

> ###### 用例编号：02
>
> ###### 作者：程熹
>
> ###### 最后一次修改者：余东骏
>
> ###### 最后一次修改时间：2021/07/11

##### 3.2.3.1 特征描述：

​	购买了对应课程的学生用户或创建了对应课程的教师用户可以在对应帖子下进行评论。

 ##### 3.2.3.2 刺激响应序列：

|            刺激            |                             响应                             |
| :------------------------: | :----------------------------------------------------------: |
|        用户点击帖子        |                       系统展示帖子信息                       |
| 用户在对应帖子楼层点击评论 |                       系统展示评论弹窗                       |
|      用户输入评论内容      | 系统检查输入内容（内容长度不超255字符）并对用户进行鉴权（必须是已购买该课程的学生或创建该课程的老师），不不通过会提示错误信息并结束流程 |
|        用户确认评论        |       系统提示评论成功，展示评论内容，更新回复评论通知       |

##### 3.2.3.3 相关需求分析

|         功能         |                    需求说明                    |
| :------------------: | :--------------------------------------------: |
| `Post.createComment` | 根据用户输入的内容添加评论，并更新回复评论通知 |

#### 3.2.3  查看讨论区

> ###### 用例编号：03
>
> ###### 作者：余东骏
>
> ###### 最后一次修改者：余东骏
>
> ###### 最后一次修改时间：2021/07/11

##### 3.2.3.1 特征描述

购买了对应课程的学生用户或创建了对应课程的教师用户可以查看对应课程讨论区

##### 3.2.3.2 刺激/响应序列

|          刺激          |        响应        |
| :--------------------: | :----------------: |
| 用户点击课程对应讨论区 | 系统展示讨论区信息 |

##### 3.2.3.3 相关功能需求

|             功能             |                         需求说明                         |
| :--------------------------: | :------------------------------------------------------: |
|       `Post.getPosts`        |   返回当前讨论区所有的帖子信息列表，按照发布时间倒序排   |
| `Post.getPostsByRepliedTime` | 返回当前讨论区所有的帖子信息列表，按照最后回复时间倒序排 |

#### 3.2.4  查看帖子

> ###### 用例编号：04
>
> ###### 作者：程熹
>
> ###### 最后一次修改者：程熹
>
> ###### 最后一次修改时间：2021/07/08

##### 3.2.4.1 特征描述

购买了对应课程的学生用户或创建了对应课程的教师用户可以查看对应帖子详情

##### 3.2.4.2 刺激/响应序列

|       刺激       |       响应       |
| :--------------: | :--------------: |
| 用户点击目标帖子 | 系统展示帖子信息 |

##### 3.2.4.3 相关功能需求

|        功能        |               需求说明               |
| :----------------: | :----------------------------------: |
| `Post.getComments` | 返回当前帖子的所有内容和评论信息列表 |

#### 3.2.5  查看回帖通知

> ###### 用例编号：05
>
> ###### 作者：程熹
>
> ###### 最后一次修改者：程熹
>
> ###### 最后一次修改时间：2021/07/08

##### 3.2.5.1 特征描述

购买了对应课程的学生用户或创建了对应课程的教师用户可以查看回帖通知

##### 3.2.5.2 刺激/响应序列

|       刺激       |           响应           |
| :--------------: | :----------------------: |
| 用户查看回帖通知 | 系统展示回帖通知信息列表 |

##### 3.2.5.3 相关功能需求

|         功能          |                       需求说明                       |
| :-------------------: | :--------------------------------------------------: |
| `Post.getNotifations` | 根据当前已登陆的用户的身份返回其所有已购买课程的列表 |

### 3.3 非功能性需求

> ###### 作者：郝晨杰
>
> ###### 最后一次修改者：郝晨杰
>
> ###### 最后一次修改时间：2021/07/06

#### 3.3.1 安全性

Safety1 : 系统应该只允许经过验证和授权的用户访问。

Safety2 : 系统应该按照用户身份验证用户的访问权限。

#### 3.3.2 可维护性

Modifiability1 : 在系统的课程标识数据格式发生变化时，系统要能够在2人1天内完成。

Modifiability2 : 如果系统要增加新的活动，要能够在0.25个人月内完成。

Modifiability3 : 如果系统要增加新的用户功能，要能够在0.25个人月内完成。

#### 3.3.3 易用性

Usability1 : 课程讨论区页面⽀持按照发表时间和最新回复时间倒序分页查看。

Usability2 : 使用系统的用户可以在一分钟内浏览查询结果页面所有课程相关信息。

#### 3.3.4 可靠性

Reliability1 : 在客户端与服务器通信时，如果网络故障，系统不能出现故障。

#### 3.3.5 约束

IC1 : 系统要在网络至少支持每秒100次访问。

### 3.4  数据需求

> ###### 作者：程熹、伍成恩
>
> ###### 最后一次修改者：程熹
>
> ###### 最后一次修改时间：2021/07/06

#### 3.4.1  数据定义

DR1:系统应该永久存储用户信息，课程信息，帖子信息和评论信息；

DR2:系统删除之后的课程信息和用户数据依然要继续存储3个月的时间，以保证历史顺序显示的正确性；

#### 3.4.2  默认数据

默认数据用于以下两种情况：

* 系统中新增加数据时；
* 编辑数据时错误删除数据；

Dfault1: 评论指向的评论编号默认为0（即评论帖子本身）；

#### 3.4.3  数据格式要求

Format1: 帖子标题长度不得超过255字符，帖子正文和评论正文长度不得超过255字符；

Format2: 时间格式必须是`yyyy-mm-dd hh-mm-ss`；

### 3.5  其他

> ###### 作者：余东骏
>
> ###### 最后一次修改者：余东骏
>
> ###### 最后一次修改时间：2021/07/06

#### 安装需求

Install1: 系统上线后应给学生用户提供相应的操作指南或相关帮助页面;

Install2: 在安装系统时，要初始化用户信息等重要数据。

## 附录

> ###### 作者：余东骏
>
> ###### 最后一次修改者：余东骏
>
> ###### 最后一次修改时间：2021/07/06

无

